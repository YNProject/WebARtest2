<a-scene embedded vr-mode-ui="enabled: false" arjs="sourceType: webcam; debugUIEnabled: false;"
    renderer="logarithmicDepthBuffer: true;">

    <script>
        const cameraEl = document.querySelector('#camera');
        const petalCount = 300; // ★ここで量を調整（300〜500がおすすめ）

        for (let i = 0; i < petalCount; i++) {
            const petal = document.createElement('a-entity');
            petal.setAttribute('mixin', 'petal');

            // 透明度を少し下げて、重なった時の美しさを出します
            petal.setAttribute('material', 'opacity', 0.6);

            // 出現範囲を少し広げました（左右 ±3m、奥行き 1m〜7m）
            const x = (Math.random() - 0.5) * 6;
            const y = Math.random() * 4;
            const z = -Math.random() * 6 - 1;

            // ゆっくり落とす設定（8秒〜15秒）
            const fallDuration = 8000 + Math.random() * 7000;

            petal.setAttribute('animation__fall', {
                property: 'position',
                from: `${x} ${y + 3} ${z}`, // 少し高い位置から降らせる
                to: `${x + (Math.random() - 1)} ${y - 5} ${z}`,
                dur: fallDuration,
                loop: true,
                easing: 'linear'
            });

            petal.setAttribute('animation__rotate', {
                property: 'rotation',
                to: `${Math.random() * 360} ${Math.random() * 360} ${Math.random() * 360}`,
                dur: 4000 + Math.random() * 4000,
                loop: true,
                easing: 'linear'
            });

            cameraEl.appendChild(petal);
        }
    </script>
</a-scene>